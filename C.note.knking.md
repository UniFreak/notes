# See
- <K.N.King C Programming: A Modern Approach, E2>

# 概览

特性: 底层语言, 小型语言, 包容性语言
优点: 高效, 可移植, 功能强大, 灵活, 标准库, 与 Unix 系统的集成
缺点: 更容易隐藏错误, 可能会难以理解, 可能会难以修改

如何高效使用 C:
- 学习如何规避  C 语言的陷阱
- 使用软件工具使程序更可靠: lint/splint, bounds-checker, leak-finder
- 利用现有的代码库
- 采用切合实际的编码规范
- 避免投机取巧和极度复杂的代码
- 紧贴标准

# 基本概念

运行一个 C 程序需要的步骤
1. 编辑
2. 预处理: 程序被送到**预处理器**, 预处理器执行以 # 开头的命令 (通常称为**指令**)
3. 编译: 把程序翻译成机器指令 (即**目标代码**). 可以使用 cc 或者 gcc
    gcc 常用选项:
    - -Wall 检测到可能的错误时生成警告消息, 最好与 -O 结合使用
    - -W    除了 -Wall 生成的警告消息外, 针对具体情况的额外警告消息
    - -pedantic 根据 C 标准的要求生成警告消息, 避免使用非标准特性
    - -ansic    禁用非标准 C 特性, 并启用一些不太常用的标准特性
    - -std=c89 或 -std=c99  指定使用哪个版本的编译器来检查程序
4. 链接: **链接器**把目标代码和所需的其他附加代码整合到一起, 产生最终的完全可执行程序

简单程序的一般形式

```c
/* 可以用这种方式注释 */
// 或者这种方式

// 指令: 预处理器执行的命令
// 所有指令都以字符 # 开始. 默认只占一行, 结尾没有分号
// - 宏定义: 当宏定义包含运算符时, 必须用括号括起来
#define RECIPROCAL_OF_PI (1.0f / 3.14159f)
// - 包含指令:
#include <stdio>

// 函数: 构建程序的构建块
// 一个程序可包含多个函数, 但只有 main 函数是必须的.
int main(void) {
    // 语句: 程序运行时执行的命令
    // 每条语句都要以分号结尾 (符合语句则不需要)

    // 变量声明: 使用变量前必须先声明. height 是一个未初始化的变量
    int height;
    // 变量初始化:
    //   同一个声明中可以对任意数量的变量进行初始化
    //   12, 10 称为常量 (constant), 也是一个初始化式. 通过等号 = 赋值给变量
    int length = 12, width = 10;

    // 输出字符串: 提示用户输入的的消息通常不应该以换行符结束
    printf("Enter height of box: ");
    // 读取输入:
    scanf("%d", &height);
}
```

对变量, 函数, 宏和其他实体进行命名的名字称为**标识符**. 它是由字母或下划线开头的字母, 数字, 下划线组成的字符序列. 并且区分大小写.

有特殊含义的单词称为**保留字**或**关键字**, 它们不能用作标识符:

    auto break case char continue const default do double else
    enum extern float for goto int if inline long register
    restrict return short signed sizeof static struct switch typedef
    union unsigned void volatile while _Bool _Complex _Imaginary

# 格式化输入输出

printf 函数用来显示**格式串(format string)**的内容: printf(格式串, 表达式...)

格式串包含普通字符和**转换说明**. 转换说明以 % 开头, 用来表示待填充的值的占位符. 形如 %m.pX:
- m 指定最小字段宽度, 在 m 前加一个负号会导致左对齐
- p 表示精度, 它根据**转换说明符** X 的不同含义也不同
    + d: 表示成十进制形式的整数时, p 指明了显示数字的最少个数
    + e: 表示成指数形式的浮点数时, p 指明了小数点后出现的数字的个数 (默认为 6)
    + f: 表示成定点十进制形式的浮点数时, p 同上
    + g: 根据数的大小自动选择 f 形式或 e 形式
在 %m.pX 中, 可以不指定 p, 写成 %mX 形式 (注意 . 也去掉了)

C 编译器不会检测格式串中转换说明的数量是否和输出项的数量相匹配.
也不会检测转换说明是否适合要显示项的数据类型. 如果使用了不正确的转换说明, 将产生无意义的输出.

# Tricks

两整数相处, 结果会**向下取整**, 为了**向上取整**, 可以加上除数-1再除以除数

```c
960 / 166; // 向下取整: 5
(960 + 165) / 166 // 向上取整
```

